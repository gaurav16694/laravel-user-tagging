!function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=2)}([function(t,e){function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),r=function(){function t(e){n(this,t),this.options=e,this.collections=[],this.input=this.findNode(this.options.input,".has-mentions"),this.output=this.findNode(this.options.output,"#mentions"),this.collect().attach().listen()}return o(t,[{key:"findNode",value:function(t,e){return document.querySelector(t||e)}},{key:"template",value:function(t){return function(e){return'<span class="mention-node" data-object="'+t.pool+":"+e.original[t.reference]+'">'+(t.trigger||"@")+e.original[t.display]+"</span>"}}},{key:"values",value:function(t){return function(e,n){if(!(e.length<=1)){var o=new XMLHttpRequest;o.onreadystatechange=function(){4==this.readyState&&200==this.status&&n(JSON.parse(this.responseText))},o.open("post","/api/mentions?p="+t.pool+"&q="+e,!0),o.send()}}}},{key:"collect",value:function(){var t=!0,e=!1,n=void 0;try{for(var o,r=this.options.pools[Symbol.iterator]();!(t=(o=r.next()).done);t=!0){var i=o.value;this.collections.push({trigger:i.trigger||"@",lookup:i.display,allowSpaces:i.allowSpaces||!0,selectTemplate:this.template(i),values:this.values(i)})}}catch(t){e=!0,n=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw n}}return this}},{key:"attach",value:function(){return this.tribute=new Tribute({collection:this.collections}),this.tribute.attach(this.input),this}},{key:"listen",value:function(){var t=this;this.input.addEventListener("keyup",function(e){var n=e.target,o=t.output,r=[],i=n.getElementsByClassName("mention-node"),u=!0,a=!1,s=void 0;try{for(var l,c=i[Symbol.iterator]();!(u=(l=c.next()).done);u=!0){var f=l.value;r.push(f.getAttribute("data-object"))}}catch(t){a=!0,s=t}finally{try{!u&&c.return&&c.return()}finally{if(a)throw s}}o.value=r.join(),n.hasAttribute("for")&&!t.options.ignoreFor&&(document.querySelector(n.getAttribute("for")).value=n.innerHTML)})}}]),t}();t.exports=r},function(t,e){},function(t,e,n){n(0),t.exports=n(1)}]);